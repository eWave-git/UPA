<!-- Page header -->
<div class="page-header d-print-none">
    <div class="container-xl">
        <div class="row g-2 align-items-center">
            <div class="col">
                <h2 class="page-title">
                    스위치 제어
                </h2>
            </div>

            <!-- Page title actions -->

            <div class="col-auto ms-auto d-print-none">
                <a href="/manager/switch_form">
                    <button type="button" class="btn btn-primary">
                        <!-- Download SVG icon from http://tabler-icons.io/i/printer -->

                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>
                        제어 추가
                    </button>
                </a>
            </div>

        </div>
    </div>
</div>
<!-- Page body -->
<div class="page-body">
    <div class="container-xl">


        <div class="row row-cards">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">설정된 제어</h3>

                    </div>
                    <div class="table-responsive" >
                        <table id="farm_list" class="table table-vcenter card-table">
                            <colgroup>
                                <col width="5%">
                                <col width="">
                                <col width="20%">
                                <col width="8%">
                                <col width="8%">
                                <col width="15%">
                                <col width="15%">
                                <col width="5%">
                            </colgroup>
                            <thead>
                            <tr>
                                <th>번호</th>
                                <th>이름</th>
                                <th>UPA</th>
                                <th>현재상태</th>
                                <th>상태변경</th>
                                <th>등록시점</th>
                                <th>최종변경시점</th>
                                <th>제어삭제</th>
                            </tr>
                            </thead>
                            <tbody>
                            {{switch_list_item}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>


    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    $(function () {
        $("[name='relay']").click(function () {
            let val = "";
            if ($(this).is(":checked")) {
                val = 1;
            } else {
                val = 0;
            }

            $.ajax({
                url:'/manager/get_control_relay_change',
                type:'post',
                data: {
                    control_idx:$(this).data('idx'), field:$(this).data('field'), val:val
                },
                dataType: "json",
                success:function(obj){
                    if (obj.success) {
                        window.location.reload(true);
                    }
                }
            })
        });
    });
</script>